<div class="w-full overflow-hidden bg-white dark:bg-gray-800 rounded-xl shadow-md p-4">
  <div class="flex justify-between items-center mb-4">
    <button class="w-9 h-9 flex items-center justify-center rounded-full bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-600 dark:text-gray-300" (click)="previousMonth()">
      <ion-icon name="chevron-back-outline" class="text-xl"></ion-icon>
    </button>

    <div class="text-center">
      <h2 class="text-xl font-bold ">{{ monthNames[currentMonth] }} {{ currentYear }}</h2>
    </div>

    <button class="w-9 h-9 flex items-center justify-center rounded-full bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-600 dark:text-gray-300" (click)="nextMonth()">
      <ion-icon name="chevron-forward-outline" class="text-xl"></ion-icon>
    </button>
  </div>

  <button class="block mx-auto mb-4 text-sm text-blue-500  px-2 py-1 rounded hover:bg-blue-50 dark:hover:bg-blue-900/10" (click)="goToToday()">
    {{ 'CALENDAR.today' | translate }}
  </button>

  <div class="grid grid-cols-7 gap-1 mb-2">
    <div *ngFor="let day of weekdays" class="text-center font-medium text-gray-600 dark:text-gray-300 ">
      {{ day }}
    </div>
  </div>

  <div class="grid grid-cols-7 gap-1">
    <div
      *ngFor="let day of calendarDays"
      class="aspect-square rounded-lg relative cursor-pointer flex flex-col items-center justify-center p-1"
      [ngClass]="{
        'bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100': isCurrentMonth(day.date),
        'bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-500': !isCurrentMonth(day.date),
        'bg-blue-100 dark:bg-blue-900/30 font-bold text-blue-700 dark:text-blue-300': isTodayComplete(day.date, day.entry),
        'bg-orange-100 dark:bg-orange-900/30 font-bold text-orange-700 dark:text-orange-300 animate-pulse': isTodayWithoutEntry(day.date),
        'bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-400': hasValidAnswerId(day.entry) && !isToday(day.date),
        'hover:bg-blue-50 dark:hover:bg-blue-900/10': true
      }"
      (click)="selectDate(day)"
    >
      <div class="text-sm mb-0.5" [ngClass]="{'animate-bounce': isTodayWithoutEntry(day.date)}">{{ day.date.getDate() }}</div>
      <div class="absolute top-[7px] left-0 right-0 mx-auto w-8 h-8 flex items-center justify-center leading-none" *ngIf="hasValidAnswerId(day.entry)">
        <img
          [src]="getEntryIcon(day.entry)"
          alt="Emotion icon"
          class="w-8 h-8 object-contain"
          *ngIf="getEntryIcon(day.entry)"
        />
      </div>
    </div>
  </div>
</div>
