<app-header
  [pageTitle]="'CLASS_MANAGEMENT.title' | translate"
  backgroundColor="linear-gradient(to bottom, #3b82f6, #1e40af)"
  defaultBackHref="/teacher-dashboard">
</app-header>

<ion-content [fullscreen]="true" class="bg-white">
  <!-- Refresher -->
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content
      [pullingText]="'LOADING.pull_to_refresh' | translate"
      [refreshingText]="'LOADING.refreshing' | translate">
    </ion-refresher-content>
  </ion-refresher>

  <!-- Loading -->
  <div *ngIf="isLoading" class="flex justify-center items-center h-32">
    <ion-spinner name="crescent" color="primary"></ion-spinner>
    <span class="ml-2 text-gray-600">{{ 'CLASS_MANAGEMENT.loading_classes' | translate }}</span>
  </div>

  <!-- Class List -->
  <div class="p-4" *ngIf="!isLoading">
    <h2 class="text-xl font-semibold text-gray-800 mb-4">
      {{ 'CLASS_MANAGEMENT.my_classes' | translate }}
    </h2>

    <!-- No classes message -->
    <div *ngIf="classes.length === 0" class="text-center py-8">
      <ion-icon name="school-outline" class="text-6xl text-gray-400 mb-4"></ion-icon>
      <p class="text-gray-500 text-lg">{{ 'CLASS_MANAGEMENT.no_classes' | translate }}</p>
    </div>

    <!-- Classes grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" *ngIf="classes.length > 0">
      <div
        *ngFor="let classItem of classes"
        class="bg-white rounded-xl shadow-md border border-gray-200 p-4 cursor-pointer hover:shadow-lg transition-shadow"
        (click)="viewStudents(classItem)">
        
        <!-- Class header -->
        <div class="flex items-center justify-between mb-3">
          <div class="flex items-center">
            <ion-icon name="school" class="text-2xl text-blue-500 mr-2"></ion-icon>
            <h3 class="text-lg font-semibold text-gray-800">{{ classItem.name }}</h3>
          </div>
          <ion-icon name="chevron-forward" class="text-gray-400"></ion-icon>
        </div>

        <!-- Class details -->
        <div class="space-y-2">
          <div class="flex items-center text-sm text-gray-600" *ngIf="classItem.code">
            <ion-icon name="bookmark-outline" class="mr-2"></ion-icon>
            <span>{{ 'CLASS_MANAGEMENT.class_code' | translate }}: {{ classItem.code }}</span>
          </div>
          
          <div class="flex items-center text-sm text-gray-600" *ngIf="classItem.grade">
            <ion-icon name="library-outline" class="mr-2"></ion-icon>
            <span>{{ 'CLASS_MANAGEMENT.grade' | translate }}: {{ classItem.grade }}</span>
          </div>
          
          <div class="flex items-center text-sm text-gray-600" *ngIf="classItem.academic_year">
            <ion-icon name="calendar-outline" class="mr-2"></ion-icon>
            <span>{{ 'CLASS_MANAGEMENT.academic_year' | translate }}: {{ classItem.academic_year }}</span>
          </div>
          <div class="flex items-center text-sm text-blue-600 font-medium">
            <ion-icon name="people-outline" class="mr-2"></ion-icon>
            <span>{{ classItem.student_count || 0 }} {{ 'CLASS_MANAGEMENT.students' | translate }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</ion-content>

<app-footer></app-footer>
