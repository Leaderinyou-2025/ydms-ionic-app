<app-header
  [pageTitle]="TranslateKeys.TITLE_EXPERT_GUIDE_DETAIL"
  defaultBackHref="/{{PageRoutes.EXPERT_GUIDE}}"
  backgroundColor="linear-gradient(to bottom, #9333ea, #4c1d95)">
</app-header>

<ion-content [fullscreen]="true" class="native-padding-content custom-page-bg-light ion-padding pb-32">
  <!-- Loading skeleton -->
  <div *ngIf="isLoading" class="mt-3">
    <ion-skeleton-text animated="true" class="mb-3 w-full h-96 rounded-lg"></ion-skeleton-text>
  </div>

  <!-- Guide detail content -->
  <div *ngIf="!isLoading && guideDetail" class="mt-3">
    <!-- Title -->
    <h1 class="text-2xl font-bold text-gray-800 dark:text-gray-200 mb-4">
      {{ guideDetail.name }}
    </h1>

    <!-- Guide info -->
    <ion-card class="shadow-md border border-gray-200 dark:border-gray-700 mb-4">
      <ion-card-content>
        <!-- Categories -->
        <div *ngIf="getCategoryNames()" class="mb-3">
          <div class="flex items-center mb-2">
            <ion-icon name="bookmark-outline" class="text-blue-500 mr-2"></ion-icon>
            <span class="font-medium text-gray-700 dark:text-gray-300">{{ TranslateKeys.EXPERT_GUIDE_CATEGORIES | translate }}</span>
          </div>
          <div class="flex flex-wrap gap-2">
            <ion-chip *ngFor="let category of guideDetail.category_ids" color="primary" class="text-sm">
              {{ category.name }}
            </ion-chip>
          </div>
        </div>

        <!-- Area of expertise -->
        <div class="mb-3">
          <div class="flex items-center mb-2">
            <ion-icon name="school-outline" class="text-green-500 mr-2"></ion-icon>
            <span class="font-medium text-gray-700 dark:text-gray-300">{{ TranslateKeys.EXPERT_GUIDE_CATEGORIES | translate }}</span>
          </div>
          <ion-chip color="success" class="text-sm">
            {{ getAreaOfExpertiseTranslationKey() | translate }}
          </ion-chip>
        </div>

        <!-- Scores and rank points -->
        <div class="flex justify-between items-center">
          <div class="flex items-center">
            <ion-icon name="star-outline" class="text-yellow-500 mr-2"></ion-icon>
            <span class="font-medium text-gray-700 dark:text-gray-300">{{ TranslateKeys.EXPERT_GUIDE_SCORES | translate }}: </span>
            <span class="text-yellow-600 font-bold ml-1">{{ guideDetail.scores }}</span>
          </div>
          <div class="flex items-center">
            <ion-icon name="trophy-outline" class="text-orange-500 mr-2"></ion-icon>
            <span class="font-medium text-gray-700 dark:text-gray-300">{{ TranslateKeys.EXPERT_GUIDE_RANK_POINT | translate }}: </span>
            <span class="text-orange-600 font-bold ml-1">{{ guideDetail.rank_point }}</span>
          </div>
        </div>
      </ion-card-content>
    </ion-card>

    <!-- Description -->
    <div *ngIf="guideDetail.desciption" class="mb-4">
      <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-2">
        {{ TranslateKeys.EXPERT_GUIDE_DESCRIPTION | translate }}
      </h3>
      <div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg">
        <p class="text-gray-700 dark:text-gray-300">{{ guideDetail.desciption }}</p>
      </div>
    </div>

    <!-- Guide content -->
    <div *ngIf="guideDetail.guide_content" class="mb-4">
      <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-2">
        {{ TranslateKeys.EXPERT_GUIDE_CONTENT | translate }}
      </h3>
      <ion-card class="shadow-md border border-gray-200 dark:border-gray-700">
        <ion-card-content>
          <div class="prose prose-sm max-w-none dark:prose-invert">
            <app-safe-html-viewer [htmlData]="guideDetail.guide_content"></app-safe-html-viewer>
          </div>
        </ion-card-content>
      </ion-card>
    </div>
  </div>

  <!-- No data message -->
  <div *ngIf="!isLoading && !guideDetail" class="text-center mt-8">
    <ion-icon name="document-outline" class="text-6xl text-gray-400 mb-4"></ion-icon>
    <p class="text-gray-500 dark:text-gray-400">{{ TranslateKeys.EXPERT_GUIDE_NO_DATA | translate }}</p>
  </div>
</ion-content>

<app-footer></app-footer>
